<!DOCTYPE html>
<html>

<!-- OPTIMAL RESOLUTION: 1920x1080 -->

<head>
    <title>zunderstream TPIR Stage</title>
    <link href="./styles/shared.css" rel="stylesheet" type="text/css" />
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        :root {
            --big-door-border-panel-bg-color: #3bb447;
            --opening-border-panel-bg-color: #d4af37;
        }

        body {
            background-color: #000;
            width: 1920px;
            height: 1080px;
        }

        @keyframes light {
            0% {
                opacity: 0.2;
            }

            25% {
                opacity: 0.8;
            }

            100% {
                opacity: 0.2;
            }
        }

        #big-doors>.lights>*,
        #opening>.lights>* {
            position: fixed;
            border-radius: 50%;
            background: radial-gradient(circle, #ffb, #ffb3);
            animation: light 0.4s ease-in-out 0s infinite;
        }

        #big-doors>.lights>* {
            height: 30px;
            width: 30px;
            margin: -15px 0 0 -15px;
            border: 2px solid #ccc;
        }

        #opening>.lights>* {
            height: 50px;
            width: 50px;
            margin: -25px 0 0 -25px;
            border: 5px solid #ccc;
        }

        #big-doors>.lights>*:nth-child(4n+0),
        #opening>.lights>*:nth-child(4n+0) {
            animation-delay: 0.3s;
        }

        #big-doors>.lights>*:nth-child(4n+1),
        #opening>.lights>*:nth-child(4n+1) {
            animation-delay: 0.2s;
        }

        #big-doors>.lights>*:nth-child(4n+2),
        #opening>.lights>*:nth-child(4n+2) {
            animation-delay: 0.1s;
        }

        #big-doors>.lights>*:nth-child(4n+3),
        #opening>.lights>*:nth-child(4n+3) {
            animation-delay: 0s;
        }

        #big-doors .border-panel {
            position: fixed;
            background-color: var(--big-door-border-panel-bg-color);
        }

        #opening-border {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            box-shadow: inset 0px 0px 150px 120px var(--opening-border-panel-bg-color);
        }

        #opening .border-panel {
            position: fixed;
            background-color: var(--opening-border-panel-bg-color);
        }

        @keyframes titleTextFlipInTransition {
            0% {
                transform: scale(0) rotate3d(0, 1, 0, 0deg);
                opacity: 1;
            }

            25% {
                transform: scale(1) rotate3d(0, 1, 0, 360deg);
                opacity: 1;
            }

            75% {
                transform: scale(1) rotate3d(0, 1, 0, 360deg);
                opacity: 1;
            }

            76% {
                transform: scale(1) rotate3d(0, 1, 0, 360deg);
                opacity: 0;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes titleTextFinalFlipInOutTransition {
            0% {
                transform: scale(0) rotate3d(0, 1, 0, 0deg);
                opacity: 1;
            }

            15% {
                transform: scale(1) rotate3d(0, 1, 0, 360deg);
                opacity: 1;
            }

            50% {
                transform: scale(1) rotate3d(0, 1, 0, 360deg);
                opacity: 1;
            }

            90% {
                transform: scale(0) rotate3d(0, 1, 0, 0deg);
                opacity: 1;
            }

            91% {
                transform: scale(0) rotate3d(0, 1, 0, 0deg);
                opacity: 0;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes titleTextZoomInTransition {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            10% {
                transform: scale(0.1);
                opacity: 0;
            }

            11% {
                transform: scale(0.1);
                opacity: 1;
            }

            30% {
                transform: scale(0.1);
                opacity: 1;
            }

            35% {
                transform: scale(1);
                opacity: 1;
            }

            80% {
                transform: scale(1);
                opacity: 1;
            }

            81% {
                transform: scale(1);
                opacity: 0;
            }

            100% {
                opacity: 0;
            }
        }

        #title-text-container {
            opacity: 1;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .title-text {
            width: 1400px;
            font-family: 'Windsor';
            font-size: 120px;
            color: #09f;
            text-align: center;
            text-transform: uppercase;
            text-shadow: 7px 7px 0 #000;
            -webkit-text-stroke: 5px #000;
        }

        .title-text.flip-in {
            animation: titleTextFlipInTransition 3s linear 0s 3 forwards;
        }

        .title-text.flip-in-out {
            animation: titleTextFlipInTransition 3s linear 0s 3 forwards,
                titleTextFlipInTransition 3s linear 3s 3 forwards,
                titleTextFlipInTransition 3s linear 6s 3 forwards,
                titleTextFinalFlipInOutTransition 5s linear 9s 1 forwards;
        }

        .title-text.zoom-in {
            animation: titleTextZoomInTransition 3s linear 0s 4 forwards;
        }

        #zunderstream-logo {
            position: fixed;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            font-family: 'Pricedown';
            /* -webkit-text-stroke: 2px #fff; */
            transform: scale(0.1);
            opacity: 0;
            animation: logoZoomInTransition 10s ease-out 1s 1 forwards;
        }

        #zunderstream-logo .logo-left {
            margin-right: 0;
        }

        #zunderstream-logo .logo-left img {
            max-height: 480px;
            max-width: 300px;
        }

        #zunderstream-logo .logo-right {
            display: flex;
            flex-direction: column;
            justify-content: center;
            font-size: 120px;
            line-height: 160px;
            color: #fff;
        }

        #zunderstream-logo .large-logo-text {
            font-size: 180px;
            color: #fff;
        }

        @keyframes logoZoomInTransition {
            0% {
                transform: scale(0.1);
                opacity: 0;
            }

            1% {
                transform: scale(0.1);
                opacity: 1;
            }

            25% {
                transform: scale(0.1);
                opacity: 1;
            }

            50% {
                transform: scale(1);
                opacity: 1;
            }

            95% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        #contestants {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            flex-direction: row;
            justify-content: center;
        }

        #contestants.hide-contestants {
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s 0.3s, opacity 0.3s linear;
        }

        #contestants>div {
            height: 640px;
            width: 350px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #contestants>div.hide-contestant {
            opacity: 0;
        }

        #contestants img {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: solid 8px;
            background: #fff;
            animation: contestantAvatarFlipIn 1s linear 0s forwards;
        }

        #contestants>div.hidecontestant img {
            animation: none !important;
        }

        #contestants .name {
            display: inline-block;
            width: 240px;
            height: 140px;
            margin-top: 20px;
            padding: 10px 20px;
            box-sizing: border-box;
            color: white;
            font-family: 'Sports Type';
            font-weight: bold;
            font-size: 80px;
            text-align: right;
            border: solid 10px #999 !important;
        }

        #contestant-1 img,
        #contestant-1 .name {
            background-color: #c00;
            border-color: #c00;
        }

        #contestant-2 img,
        #contestant-2 .name {
            background-color: #00c;
            border-color: #00c;
        }

        #contestant-3 img,
        #contestant-3 .name {
            background-color: #cc0;
            border-color: #cc0;
        }

        #contestant-4 img,
        #contestant-4 .name {
            background-color: #0c0;
            border-color: #0c0;
        }

        @keyframes contestantAvatarFlipIn {
            from {
                transform: scale(0) rotate3d(0, 1, 0, -180deg) translateY(100px);
                opacity: 1;
            }

            to {
                transform: scale(1) rotate3d(0, 1, 0, 360deg) translateY(400px);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }
    </style>
    <script src="./scripts/zunderstream-base.js" type="text/javascript"></script>
</head>

<body>
    <div id="big-doors" class="hidden">
        <div id="big-doors-border-panels">
            <!-- BORDER PANELS -->
            <!-- Inverted corners behind the other panels-->
            <div class="border-panel" style="top: 800px; height: 80px; right: 0; width: 220px; background: radial-gradient(circle 40px at 0 0, transparent 0, transparent 80px, var(--big-door-border-panel-bg-color) 81px);"></div>
            <div class="border-panel" style="top: 120px; height: 80px; right: 0; width: 220px; background: radial-gradient(circle 40px at 0 80px, transparent 0, transparent 80px, var(--big-door-border-panel-bg-color) 81px);"></div>

            <div class="border-panel" style="top: 800px; height: 80px; left: 0; width: 220px; background: radial-gradient(circle 40px at 220px 0, transparent 0, transparent 80px, var(--big-door-border-panel-bg-color) 81px);"></div>
            <div class="border-panel" style="top: 120px; height: 80px; left: 0; width: 220px; background: radial-gradient(circle 40px at 220px 80px, transparent 0, transparent 80px, var(--big-door-border-panel-bg-color) 81px);"></div>

            <div class="border-panel" style="top: 880px; height: 200px; left: 1500px; width: 420px; border-top-left-radius: 80px;"></div>
            <div class="border-panel" style="top: 880px; bottom: 1080px; height: 200px; left: 0px; right: 420px; width: 420px; border-top-right-radius: 80px;"></div>

            <div class="border-panel" style="top: 200px; height: 600px; right: 0; width: 140px;"></div>
            <div class="border-panel" style="top: 200px; height: 600px; left: 0; width: 140px;"></div>
            <div class="border-panel" style="top: 0; height: 120px; left: 0; width: 1920px;"></div>
        </div>

        <div class="lights">
            <!-- BOTTOM RIGHT CORNER-->
            <div style="top: 1060px; left: 1500px;"></div>
            <div style="top: 1020px; left: 1500px;"></div>
            <div style="top: 980px; left: 1500px;"></div>
            <div style="top: 940px; left: 1500px;"></div>
            <div style="top: 900px; left: 1520px;"></div>
            <div style="top: 880px; left: 1560px;"></div>
            <div style="top: 880px; left: 1600px;"></div>
            <div style="top: 880px; left: 1640px;"></div>
            <div style="top: 880px; left: 1680px;"></div>
            <div style="top: 880px; left: 1720px;"></div>
            <div style="top: 860px; left: 1760px;"></div>

            <!-- RIGHT SIDE -->
            <div style="top: 820px; left: 1780px;"></div>
            <div style="top: 780px; left: 1780px;"></div>
            <div style="top: 740px; left: 1780px;"></div>
            <div style="top: 700px; left: 1780px;"></div>
            <div style="top: 660px; left: 1780px;"></div>
            <div style="top: 620px; left: 1780px;"></div>
            <div style="top: 580px; left: 1780px;"></div>
            <div style="top: 540px; left: 1780px;"></div>
            <div style="top: 500px; left: 1780px;"></div>
            <div style="top: 460px; left: 1780px;"></div>
            <div style="top: 420px; left: 1780px;"></div>
            <div style="top: 380px; left: 1780px;"></div>
            <div style="top: 340px; left: 1780px;"></div>
            <div style="top: 300px; left: 1780px;"></div>
            <div style="top: 260px; left: 1780px;"></div>
            <div style="top: 220px; left: 1780px;"></div>
            <div style="top: 180px; left: 1780px;"></div>
            <div style="top: 140px; left: 1760px;"></div>

            <!-- TOP -->
            <div style="top: 120px; left: 1720px;"></div>
            <div style="top: 120px; left: 1680px;"></div>
            <div style="top: 120px; left: 1640px;"></div>
            <div style="top: 120px; left: 1600px;"></div>
            <div style="top: 120px; left: 1560px;"></div>
            <div style="top: 120px; left: 1520px;"></div>
            <div style="top: 120px; left: 1480px;"></div>
            <div style="top: 120px; left: 1440px;"></div>
            <div style="top: 120px; left: 1400px;"></div>
            <div style="top: 120px; left: 1360px;"></div>
            <div style="top: 120px; left: 1320px;"></div>
            <div style="top: 120px; left: 1280px;"></div>
            <div style="top: 120px; left: 1240px;"></div>
            <div style="top: 120px; left: 1200px;"></div>
            <div style="top: 120px; left: 1160px;"></div>
            <div style="top: 120px; left: 1120px;"></div>
            <div style="top: 120px; left: 1080px;"></div>
            <div style="top: 120px; left: 1040px;"></div>
            <div style="top: 120px; left: 1000px;"></div>
            <div style="top: 120px; left: 960px;"></div>
            <div style="top: 120px; left: 920px;"></div>
            <div style="top: 120px; left: 880px;"></div>
            <div style="top: 120px; left: 840px;"></div>
            <div style="top: 120px; left: 800px;"></div>
            <div style="top: 120px; left: 760px;"></div>
            <div style="top: 120px; left: 720px;"></div>
            <div style="top: 120px; left: 680px;"></div>
            <div style="top: 120px; left: 640px;"></div>
            <div style="top: 120px; left: 600px;"></div>
            <div style="top: 120px; left: 560px;"></div>
            <div style="top: 120px; left: 520px;"></div>
            <div style="top: 120px; left: 480px;"></div>
            <div style="top: 120px; left: 440px;"></div>
            <div style="top: 120px; left: 400px;"></div>
            <div style="top: 120px; left: 360px;"></div>
            <div style="top: 120px; left: 320px;"></div>
            <div style="top: 120px; left: 280px;"></div>
            <div style="top: 120px; left: 240px;"></div>
            <div style="top: 120px; left: 200px;"></div>

            <!-- LEFT SIDE -->
            <div style="top: 140px; left: 160px;"></div>
            <div style="top: 180px; left: 140px;"></div>
            <div style="top: 220px; left: 140px;"></div>
            <div style="top: 260px; left: 140px;"></div>
            <div style="top: 300px; left: 140px;"></div>
            <div style="top: 340px; left: 140px;"></div>
            <div style="top: 380px; left: 140px;"></div>
            <div style="top: 420px; left: 140px;"></div>
            <div style="top: 460px; left: 140px;"></div>
            <div style="top: 500px; left: 140px;"></div>
            <div style="top: 540px; left: 140px;"></div>
            <div style="top: 580px; left: 140px;"></div>
            <div style="top: 620px; left: 140px;"></div>
            <div style="top: 660px; left: 140px;"></div>
            <div style="top: 700px; left: 140px;"></div>
            <div style="top: 740px; left: 140px;"></div>
            <div style="top: 780px; left: 140px;"></div>
            <div style="top: 820px; left: 140px;"></div>

            <!-- BOTTOM RIGHT CORNER-->
            <div style="top: 860px; left: 160px;"></div>
            <div style="top: 880px; left: 200px;"></div>
            <div style="top: 880px; left: 240px;"></div>
            <div style="top: 880px; left: 280px;"></div>
            <div style="top: 880px; left: 320px;"></div>
            <div style="top: 880px; left: 360px;"></div>
            <div style="top: 900px; left: 400px;"></div>
            <div style="top: 940px; left: 420px;"></div>
            <div style="top: 980px; left: 420px;"></div>
            <div style="top: 1020px; left: 420px;"></div>
            <div style="top: 1060px; left: 420px;"></div>
        </div>
    </div>

    <div id="opening">
        <div id="opening-border"></div>

        <div class="lights">
            <!-- LEFT SIDE -->
            <div style="top: 840px; left: 150px;"></div>
            <div style="top: 765px; left: 150px;"></div>
            <div style="top: 690px; left: 150px;"></div>
            <div style="top: 615px; left: 150px;"></div>
            <div style="top: 540px; left: 150px;"></div>
            <div style="top: 465px; left: 150px;"></div>
            <div style="top: 390px; left: 150px;"></div>
            <div style="top: 315px; left: 150px;"></div>
            <div style="top: 240px; left: 150px;"></div>

            <!-- TOP -->
            <div style="top: 180px; left: 180px;"></div>
            <div style="top: 150px; left: 240px;"></div>
            <div style="top: 150px; left: 315px;"></div>
            <div style="top: 150px; left: 390px;"></div>
            <div style="top: 150px; left: 465px;"></div>
            <div style="top: 150px; left: 540px;"></div>
            <div style="top: 150px; left: 615px;"></div>
            <div style="top: 150px; left: 690px;"></div>
            <div style="top: 150px; left: 765px;"></div>
            <div style="top: 150px; left: 840px;"></div>
            <div style="top: 150px; left: 915px;"></div>
            <div style="top: 150px; left: 990px;"></div>
            <div style="top: 150px; left: 1065px;"></div>
            <div style="top: 150px; left: 1140px;"></div>
            <div style="top: 150px; left: 1215px;"></div>
            <div style="top: 150px; left: 1290px;"></div>
            <div style="top: 150px; left: 1365px;"></div>
            <div style="top: 150px; left: 1440px;"></div>
            <div style="top: 150px; left: 1515px;"></div>
            <div style="top: 150px; left: 1590px;"></div>
            <div style="top: 150px; left: 1665px;"></div>
            <div style="top: 180px; left: 1730px;"></div>

            <!-- RIGHT SIDE -->
            <div style="top: 240px; left: 1770px;"></div>
            <div style="top: 315px; left: 1770px;"></div>
            <div style="top: 390px; left: 1770px;"></div>
            <div style="top: 465px; left: 1770px;"></div>
            <div style="top: 540px; left: 1770px;"></div>
            <div style="top: 615px; left: 1770px;"></div>
            <div style="top: 690px; left: 1770px;"></div>
            <div style="top: 765px; left: 1770px;"></div>
            <div style="top: 840px; left: 1770px;"></div>

            <!-- BOTTOM -->
            <div style="top: 900px; left: 1730px;"></div>
            <div style="top: 930px; left: 1665px;"></div>
            <div style="top: 930px; left: 1590px;"></div>
            <div style="top: 930px; left: 1515px;"></div>
            <div style="top: 930px; left: 1440px;"></div>
            <div style="top: 930px; left: 1365px;"></div>
            <div style="top: 930px; left: 1290px;"></div>
            <div style="top: 930px; left: 1215px;"></div>
            <div style="top: 930px; left: 1140px;"></div>
            <div style="top: 930px; left: 1065px;"></div>
            <div style="top: 930px; left: 990px;"></div>
            <div style="top: 930px; left: 915px;"></div>
            <div style="top: 930px; left: 840px;"></div>
            <div style="top: 930px; left: 765px;"></div>
            <div style="top: 930px; left: 690px;"></div>
            <div style="top: 930px; left: 615px;"></div>
            <div style="top: 930px; left: 540px;"></div>
            <div style="top: 930px; left: 465px;"></div>
            <div style="top: 930px; left: 390px;"></div>
            <div style="top: 930px; left: 315px;"></div>
            <div style="top: 930px; left: 240px;"></div>
            <div style="top: 900px; left: 180px;"></div>
        </div>
    </div>

    <div id="title-text-container">
        <div id="title-text" class="title-text flip-in-out hidden">Ridiculous<br />Shenanigans</div>
    </div>

    <div id="zunderstream-logo" class="hidden">
        <div class="logo-left"><img src="images/z-dollar.png"></div>
        <div class="logo-right">
            <div>the</div>
            <div class="large-logo-text">zunder</div>
            <div>stream</div>
        </div>
    </div>

    <div id="contestants">
        <div id="contestant-1" class="hide-contestant"></div>
        <div id="contestant-2" class="hide-contestant"></div>
        <div id="contestant-3" class="hide-contestant"></div>
        <div id="contestant-4" class="hide-contestant"></div>
    </div>

    <script type="text/javascript">
        var contestants = [];

        async function checkForUpdates() {
            const configUrl = `${zunderstreamAdminRootUrl}/tpir-config`;
            const contestantUrl = `${zunderstreamAdminRootUrl}/tpir-contestants`;
            try {
                const configResponse = await fetch(configUrl);

                if (configResponse.ok) {
                    const tpirConfig = await configResponse.json();

                    if (tpirConfig != null) {
                        if (tpirConfig.titleText != null && tpirConfig.titleText != "") {
                            setElementContents("title-text", tpirConfig.titleText);
                        }

                        if (tpirConfig.showTitleText === true) {
                            removeClassFromElement("title-text", "hidden");
                        } else {
                            addClassToElement("title-text", "hidden");
                        }

                        if (tpirConfig.showContestants === true) {
                            removeClassFromElement("contestants", "hide-contestants");
                        } else {
                            addClassToElement("contestants", "hide-contestants");
                        }

                        if (tpirConfig.showLogo === true) {
                            removeClassFromElement("zunderstream-logo", "hidden");
                        } else {
                            addClassToElement("zunderstream-logo", "hidden");
                        }
                    }
                }

                const contestantResponse = await fetch(contestantUrl);

                if (contestantResponse.ok) {
                    let newContestants = await contestantResponse.json();

                    if (newContestants.length > 0) {
                        for (let x = 0; x < 4; x++) {
                            if ((contestants[x] == null && newContestants[x] == null) ||
                                (contestants[x]?.name === newContestants[x]?.name &&
                                    contestants[x]?.avatarUrl === newContestants[x]?.avatarUrl &&
                                    contestants[x]?.show === newContestants[x]?.show)) {
                                continue;
                            }

                            contestants[x] = newContestants[x];

                            if (contestants[x] != null) {
                                setElementContents(`contestant-${x + 1}`, `<img src="${contestants[x].avatarUrl}" />`);
                            } else {
                                setElementContents(`contestant-${x + 1}`, "");
                            }

                            if (contestants[x]?.show === true) {
                                removeClassFromElement(`contestant-${x + 1}`, "hide-contestant");
                            } else {
                                addClassToElement(`contestant-${x + 1}`, "hide-contestant");
                            }
                        }
                    } else {
                        contestants = [];

                        addClassToElement("contestant-1", "hide-contestant");
                        addClassToElement("contestant-2", "hide-contestant");
                        addClassToElement("contestant-3", "hide-contestant");
                        addClassToElement("contestant-4", "hide-contestant");
                    }
                }
            }
            catch { }
        }

        document.addEventListener("DOMContentLoaded", async () => {
            checkForUpdates();
            setInterval(checkForUpdates, 1000);
        });
    </script>
</body>

</html>